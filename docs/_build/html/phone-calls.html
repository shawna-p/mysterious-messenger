<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Phone Calls &mdash; Mysterious Messenger Wiki v3.3.0 documentation</title>
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Text Messages" href="text-messages.html" />
    <link rel="prev" title="Chatrooms" href="chatrooms.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Mysterious Messenger Wiki
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Home.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Full Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits-and-acknowledgements.html">Credits and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginners-guide.html">Beginner’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-setup.html">Git Setup</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chatrooms.html">Chatrooms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Phone Calls</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-regular-phone-call">Creating a Regular Phone Call</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#incoming-calls">Incoming Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#outgoing-calls">Outgoing Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#missed-calls">Missed Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#phone-call-expiry">Phone Call Expiry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-story-call">Creating a Story Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-a-phone-call">Writing a Phone Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="#providing-choices">Providing Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changing-a-character-s-voicemail">Changing a Character’s Voicemail</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phone-callbacks">Phone Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Missed Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hanging-up">Hanging Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#phone-only-characters">Phone-Only Characters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dialogue-only-phone-characters">Dialogue-Only Phone Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incoming-call-phone-characters">Incoming Call Phone Characters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="text-messages.html">Text Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="story-mode.html">Story Mode (VN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="emails.html">Emails</a></li>
<li class="toctree-l1"><a class="reference internal" href="route-setup.html">Setting up a Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot-branches.html">Plot Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-characters.html">Creating Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="cg-albums.html">CG Albums</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous.html">Miscellaneous</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mysterious Messenger Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Phone Calls</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/phone-calls.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="phone-calls">
<h1>Phone Calls<a class="headerlink" href="#phone-calls" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Navigation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Phone Calls</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-regular-phone-call">Creating a Regular Phone Call</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#incoming-calls">Incoming Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#outgoing-calls">Outgoing Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#missed-calls">Missed Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#phone-call-expiry">Phone Call Expiry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-story-call">Creating a Story Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-a-phone-call">Writing a Phone Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="#providing-choices">Providing Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changing-a-character-s-voicemail">Changing a Character’s Voicemail</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phone-callbacks">Phone Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Missed Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hanging-up">Hanging Up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#phone-only-characters">Phone-Only Characters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dialogue-only-phone-characters">Dialogue-Only Phone Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incoming-call-phone-characters">Incoming Call Phone Characters</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="creating-a-regular-phone-call">
<h2>Creating a Regular Phone Call<a class="headerlink" href="#creating-a-regular-phone-call" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Example files to look at:</p>
<ul class="simple">
<li><p>tutorial_5_coffee.rpy</p></li>
<li><p>tutorial_11_story_call.rpy</p></li>
</ul>
<p><em>A brief overview of the steps required (more detail below):</em></p>
<ol class="arabic">
<li><p>Create a label + the correct suffix for the phone call.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">my_label_outgoing_ja</span></code> to make an outgoing call to the character <code class="docutils literal notranslate"><span class="pre">ja</span></code> available.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">my_label_incoming_ja</span></code> to trigger an incoming call from the character <code class="docutils literal notranslate"><span class="pre">ja</span></code> after the corresponding timeline item has been played.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">my_label_story_call_ja</span></code> to create a required Story Call after this timeline item from the character <code class="docutils literal notranslate"><span class="pre">ja</span></code>.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Write the phone call dialogue.</p></li>
<li><p>End the phone call with <code class="docutils literal notranslate"><span class="pre">return</span></code></p></li>
</ol>
</div>
<p>Phone calls that are tied to a particular timeline item follow a specific naming convention so the program can find them and make them available to the player. If you have a timeline item (i.e. a chatroom, Story Mode section, or Story Call) titled</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_1_4</span><span class="p">:</span>
</pre></div>
</div>
<p>then an <strong>incoming</strong> call should be named:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_1_4_incoming_z</span><span class="p">:</span>
</pre></div>
</div>
<p>an <strong>outgoing</strong> call should be named:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_1_4_outgoing_z</span><span class="p">:</span>
</pre></div>
</div>
<p>and an attached Story Call should be named:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_1_4_story_call_z</span><span class="p">:</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable of the character whom the player is calling or who is calling the player (see <a class="reference internal" href="creating-characters.html#creating-characters"><span class="std std-ref">Creating Characters</span></a> for a list of the existing characters).</p>
<p>The following section will cover <strong>incoming</strong> and <strong>outgoing</strong> calls to characters that are optional for continuing with the story. You can find more information on Story Calls at <a class="reference internal" href="route-setup.html#story-calls"><span class="std std-ref">Story Calls</span></a>.</p>
<section id="incoming-calls">
<h3>Incoming Calls<a class="headerlink" href="#incoming-calls" title="Permalink to this heading"></a></h3>
<p>Once the player is done playing through a timeline item, the program will automatically make any calls associated with that timeline item (through the naming convention mentioned above) available. If the program finds an <strong>incoming call</strong> label, then when the player finishes the timeline item they will receive an incoming call from the associated character. They have ten seconds to pick the phone call up, or they can reject the call and phone the character back later.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There can only be one incoming phone call after a given timeline item. However, it is possible to have both an incoming call after a chatroom as well as a different incoming call after an attached Story Mode.</p>
</div>
<p><strong>If the player rejects the incoming call</strong> or lets the timer run out without answering it, it acts like an <strong>outgoing</strong> call and the player can phone the character back. The player can typically play one additional timeline item before the phone call “expires” and they cannot call the character back to receive that conversation.</p>
</section>
<section id="outgoing-calls">
<h3>Outgoing Calls<a class="headerlink" href="#outgoing-calls" title="Permalink to this heading"></a></h3>
<p>Once a player finishes playing through an item that has associated outgoing calls (linked through the naming conventions mentioned above), all the associated outgoing calls will be made available. The player must then click on the characters in their Contacts list or use the redial button next to a past phone call on the History tab to call the character.</p>
<p>An outgoing call is typically available immediately after its associated timeline item and for one additional timeline item following when it became available, after which it will “expire” and the player will be unable to view that conversation by calling the character.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There can be up to one outgoing call per character available after each timeline item. If a player misses an incoming call from a character who also has an outgoing call, both conversations will be added to the pool of available calls. The player can then call the character back multiple times to receive both conversations.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For development, there is an option to show an indicator underneath a character’s contact image when there is a call available for them. You can find it in the Developer options titled <strong>Available call indicator</strong>.</p>
</div>
</section>
<section id="missed-calls">
<h3>Missed Calls<a class="headerlink" href="#missed-calls" title="Permalink to this heading"></a></h3>
<p>If the timer on an incoming phone call runs out, the phone call will be marked as “missed” and moved to the pool of available calls. The player can then call the character back to receive that conversation.</p>
<p>Phone calls can also be missed if real-time mode is turned on from the Developer settings. If an incoming call is scheduled to occur after a chatroom at 10:20 and the player opens the game after a new chatroom became available at 13:30, then they will receive a notification of a missed call at 13:30 (just before the new chatroom). If not too much time has passed since the missed call, they can then phone the character back to receive that conversation.</p>
<p>Additionally, if the player is using the game but has not yet played the 10:20 chatroom by 13:30, then if the game is open at 13:30 they will receive an incoming call which they can either accept or reject. This acts the same way as if the incoming call had been received immediately after playing the chatroom.</p>
<p>You can also change the dialogue of a phone call depending on whether the player picked up when the character first called, or if they are calling the character back. For more on that, see <a class="reference internal" href="#phone-callbacks"><span class="std std-ref">Phone Callbacks</span></a>.</p>
</section>
<section id="phone-call-expiry">
<h3>Phone Call Expiry<a class="headerlink" href="#phone-call-expiry" title="Permalink to this heading"></a></h3>
<p>As mentioned, both incoming and outgoing phone calls will become unavailable after a period of time has passed. In-game, this time is tracked via the availability of timeline items.</p>
<p>By default, a phone call will “expire” or become unavailable one additional timeline item after it first became available. In practice, this means if there are timeline items set up at the following trigger times:</p>
<ul class="simple">
<li><p>10:20 - Chatroom</p></li>
<li><p>11:40 - Chatroom + Story Call (Yoosung)</p></li>
<li><p>13:52 - Solo Story Mode</p></li>
<li><p>16:00 - Chatroom + Story Mode</p></li>
</ul>
<p>Say that the player can call Yoosung after the 10:20 AM chatroom. The “one timeline item” default timeout means that the player will be able to call Yoosung and get that particular outgoing call any time between 10:20 (after they’ve played the chatroom) and 13:51 (before they’ve played the 13:52 chatroom (sequential mode)/before it’s become available (real-time)).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note also that the fact that there’s a story call with Yoosung at 11:40 does not affect the availability of his outgoing phone call. Each outgoing/incoming phone call is treated independently of any other phone calls, so it’s even possible for the character to have more than one outgoing phone call “queued” at the same time.</p>
<p>e.g. if there’s an incoming call from Yoosung at 10:20 which the player misses, and then an outgoing call will become available after the 11:40 chatroom, then at 13:00 the player can call Yoosung once to receive the missed incoming call, and then call again to receive the outgoing call.</p>
</div>
<p>You can adjust the number of timeline items after which a phone call will expire through the <code class="docutils literal notranslate"><span class="pre">phone_timeout_dict</span></code> found in <code class="docutils literal notranslate"><span class="pre">variables_editable.rpy</span></code>. This dictionary takes the name of a phone call label and an integer (whole number) representing the number of timeline items after which this phone call should expire. The lowest valid number for this field is 0, which means that if the player doesn’t play the phone call before the timeline item immediately after it becomes available, then it will expire. So, if a phone call with an expiry of 0 becomes available at 10:20 using the above timeline, then the player must call the character before 11:40 to see that call.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">phone_timeout_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="c1"># TUTORIAL DAY</span>
    <span class="n">tutorial_chat_incoming_z</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">tutorial_chat_outgoing_y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="c1"># Feel free to add more below</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-a-story-call">
<h2>Creating a Story Call<a class="headerlink" href="#creating-a-story-call" title="Permalink to this heading"></a></h2>
<p>Mysterious Messenger also includes “story calls”, phone calls from the characters which the player must see before they can continue with the story. Story calls can be standalone, appearing on the timeline as their own story with a trigger time, or they can be attached to chatrooms or standalone story mode items as well and played after the main/parent timeline item is complete.</p>
<p>To create a standalone story call, see <a class="reference internal" href="route-setup.html#story-calls"><span class="std std-ref">Story Calls</span></a>. Otherwise, the program will automatically create a story call if a certain naming convention is used. If the label of the parent item (i.e. a chatroom or standalone story mode) is <code class="docutils literal notranslate"><span class="pre">newyear_4_2</span></code>, then you can create a label with the suffix <code class="docutils literal notranslate"><span class="pre">_story_call_</span></code> + the file_id of the character who will be calling the player e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">newyear_4_2_story_call_ja</span><span class="p">:</span>
    <span class="c1"># This is a label for a story call from the character ja</span>
</pre></div>
</div>
<p>Unlike story mode labels, there is no “generic” story call; all story calls must come from a particular character who will be calling the player.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you want to hide the identity of the caller, you can create a special “Anonymous” ChatCharacter whose file_id you can use for the story call label.</p>
</div>
<p>Story calls, like chatrooms, can also expire if the player is playing in real-time or if they hang up in the middle of the call. Expired story calls are treated as though the caller left the player a voicemail. As with chatrooms, the expired version of the story call is found at the name of the original story call label + <code class="docutils literal notranslate"><span class="pre">_expired</span></code>:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">newyear_4_2_story_call_ja_expired</span><span class="p">:</span>
    <span class="c1"># The expired version of the phone call</span>
</pre></div>
</div>
<p>A player who misses a story call or hangs up in the middle of it will either be able to play the expired version to continue the story, or can “buy back” the story call to experience the participated version.</p>
<p>Story call dialogue is written the same way as regular phone calls.</p>
</section>
<section id="writing-a-phone-call">
<h2>Writing a Phone Call<a class="headerlink" href="#writing-a-phone-call" title="Permalink to this heading"></a></h2>
<p>Phone call dialogue uses the regular character variables and doesn’t have any special arguments such as <code class="docutils literal notranslate"><span class="pre">(img=True)</span></code> or special fonts. Just use the character variable and write out dialogue in quotations e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_1_4_incoming_z</span><span class="p">:</span>
    <span class="n">z</span> <span class="s2">&quot;Hi, [name]! This is phone call dialogue.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;You write it like this.&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>Phone call labels end with <code class="docutils literal notranslate"><span class="pre">return</span></code> like all other labels.</p>
<p>You may also find Ren’Py’s “monologue mode” helpful, since you won’t be switching between expressions or different speakers very often. See <code class="docutils literal notranslate"><span class="pre">tutorial_5_coffee.rpy</span></code> for an example of this.</p>
</section>
<section id="providing-choices">
<h2>Providing Choices<a class="headerlink" href="#providing-choices" title="Permalink to this heading"></a></h2>
<p>Menus for phone calls are written very similarly to menus in other parts of the game:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">menu</span><span class="p">:</span>
    <span class="n">extend</span> <span class="s1">&#39;&#39;</span>
    <span class="s2">&quot;I love cats.&quot;</span><span class="p">:</span>
        <span class="n">ju</span> <span class="s2">&quot;I do as well.&quot;</span>
    <span class="s2">&quot;I like dogs better.&quot;</span><span class="p">:</span>
        <span class="n">ju</span> <span class="s2">&quot;Hmm. I will respectfully disagree with your opinion.&quot;</span>
</pre></div>
</div>
<p>The only notable difference is that you should include the line <code class="docutils literal notranslate"><span class="pre">extend</span> <span class="pre">''</span></code> right after the <code class="docutils literal notranslate"><span class="pre">menu:</span></code> statement and before the first choice. This will keep the dialogue said just before the menu on-screen while the choices are visible.</p>
<p>This menu, like others, also takes a <code class="docutils literal notranslate"><span class="pre">paraphrased</span></code> argument for either the menu as a whole or for an individual choice. For more information, see <a class="reference internal" href="miscellaneous.html#paraphrased-choices"><span class="std std-ref">Paraphrased Choices</span></a>.</p>
<p>Note also that if you are writing out the main character’s dialogue directly after a choice, the first line <strong>does not</strong> require a <code class="docutils literal notranslate"><span class="pre">(pauseVal=0)</span></code> clause.</p>
</section>
<section id="changing-a-character-s-voicemail">
<h2>Changing a Character’s Voicemail<a class="headerlink" href="#changing-a-character-s-voicemail" title="Permalink to this heading"></a></h2>
<p>If the program determines there are no phone calls available for a character when the player phones them, it will automatically play the character’s voicemail instead. You can change the character’s voicemail whenever you like during a route.</p>
<p>To update a character’s voicemail, use:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">ja</span><span class="o">.</span><span class="n">voicemail</span> <span class="o">=</span> <span class="s2">&quot;voicemail_1&quot;</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">ja</span></code> is the variable of the character whose voicemail you’re changing, and <code class="docutils literal notranslate"><span class="pre">voicemail_1</span></code> is the name of the label where the voicemail can be found. The default voicemail, “voicemail_1”, can be found in <code class="docutils literal notranslate"><span class="pre">01_mysme_engine/phonecall_system.rpy</span></code>.</p>
<p>Voicemails are written the same way as regular phone calls, though there are no restrictions on what a voicemail label can be called (but it’s recommended you pick a descriptive name for it, probably including the word “voicemail”).</p>
<p>You can use a character to say voicemail dialogue, or you can use the “generic” voicemail character, <code class="docutils literal notranslate"><span class="pre">vmail_phone</span></code> to say dialogue e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">voicemail_1</span><span class="p">():</span>
    <span class="k">voice</span> <span class="s2">&quot;voice files/voicemail_1.mp3&quot;</span>
    <span class="n">vmail_phone</span> <span class="s2">&quot;The person you have called is unavailable right now. Please leave a message at the tone or try again.&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>As shown above, you can also add voice files to the voicemail, which will be played during the next line of dialogue.</p>
</section>
<section id="phone-callbacks">
<h2>Phone Callbacks<a class="headerlink" href="#phone-callbacks" title="Permalink to this heading"></a></h2>
<section id="id1">
<h3>Missed Calls<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can see an example of a missed incoming call callback if you miss Seven’s call after the ‘Inviting Guests’ chatroom at 6:11am and call him back before 9:30am (in real-time) or by letting the call time out/hanging up before answering and then phoning him back (in sequential mode). The code is near the top of <code class="docutils literal notranslate"><span class="pre">tutorial_2_emails.rpy</span></code> in the <code class="docutils literal notranslate"><span class="pre">tutorial_day_scripts</span></code> folder.</p>
</div>
<p>Sometimes the player will miss a call from a character, either from playing in real-time or by ignoring the call when it comes up. By default, when the player calls the character back, if that call is available then the player will receive the exact same conversation they would have had with the character if they had picked up the phone when they initially called.</p>
<p>However, you can also alter the dialogue to account for the player calling the character back. The program will look for this alternate dialogue under a special label with the suffix <code class="docutils literal notranslate"><span class="pre">_incoming_z_callback</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the file_id of the character whom the player is phoning back. More specifically, if you had the following chatroom and incoming call:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_7_chat_4</span><span class="p">():</span>

    <span class="k">scene</span> <span class="n">morning</span>
    <span class="n">s</span> <span class="s2">&quot;This is some dialogue for the chatroom!&quot;</span>
    <span class="k">return</span>

<span class="k">label</span> <span class="n">day_7_chat_4_incoming_s</span><span class="p">():</span>
    <span class="n">s</span> <span class="s2">&quot;Hello [name]!&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;I&#39;m glad you picked up~&quot;</span>
    <span class="c1"># ...</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>Then you can create the “callback” label for <code class="docutils literal notranslate"><span class="pre">s</span></code>’s incoming call at:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_7_chat_4_incoming_s_callback</span><span class="p">():</span>
    <span class="n">s</span> <span class="s2">&quot;[name]!!! You called me back, haha.&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;I thought maybe you were busy so I didn&#39;t wanna bother you.&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;But I&#39;m glad you called.&quot;</span>
    <span class="c1"># ...</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>If this <code class="docutils literal notranslate"><span class="pre">callback</span></code> label is present, the program will jump to it when the player is calling the character back instead of going to the regular <code class="docutils literal notranslate"><span class="pre">incoming_s</span></code> label. In replay, if the player has seen both the callback version of the call as well as the regular version, they will be prompted with a menu that allows them to pick whether they want to replay the regular version or the callback version.</p>
<p>If you’ll be reusing dialogue between the two phone calls, it might be useful to create a second label that both calls can jump to. For example:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_7_chat_4</span><span class="p">():</span>
    <span class="k">scene</span> <span class="n">morning</span>
    <span class="n">s</span> <span class="s2">&quot;This is some dialogue for the chatroom!&quot;</span>
    <span class="k">return</span>

<span class="k">label</span> <span class="n">day_7_chat_4_incoming_s</span><span class="p">():</span>
    <span class="n">s</span> <span class="s2">&quot;Hello [name]!&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;I thought maybe you&#39;d be having lunch and wouldn&#39;t pick up.&quot;</span>
    <span class="k">jump</span> <span class="n">day_7_chat_4_incoming_s_ending</span>

<span class="k">label</span> <span class="n">day_7_chat_4_incoming_s_callback</span><span class="p">():</span>
    <span class="n">s</span> <span class="s2">&quot;[name]!!! You called me back, haha.&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;I thought maybe you were busy so I didn&#39;t wanna bother you.&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;But I&#39;m glad you called.&quot;</span>
    <span class="k">jump</span> <span class="n">day_7_chat_4_incoming_s_ending</span>

<span class="k">label</span> <span class="n">day_7_chat_4_incoming_s_ending</span><span class="p">():</span>
    <span class="n">s</span> <span class="s2">&quot;Are you busy right now?&quot;</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;No, not particularly.&quot;</span><span class="p">:</span>
            <span class="n">s</span> <span class="s2">&quot;Great! So I had this idea for a cat cafe I wanted to bring up in the chatroom.&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;Don&#39;t tell Jaehee though, okay? She might get mad.&quot;</span>
        <span class="s2">&quot;Yeah, I should probably get something done today.&quot;</span><span class="p">:</span>
            <span class="n">s</span> <span class="s2">&quot;Aw... don&#39;t be like that...&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;But, if you really have to leave, I&#39;ll understand.&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;Just call me back when you&#39;re free!&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;Oh... looks like I actually have to go already. I&#39;m sorry for ditching you!&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;Let&#39;s talk again later in the chatroom. Toodles!&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>The two calls start differently, but both jump to the <code class="docutils literal notranslate"><span class="pre">day_7_chat_4_incoming_s_ending</span></code> label to finish off the phone call. This can help keep your code more organized so you’re not repeating dialogue in two separate labels.</p>
</section>
<section id="hanging-up">
<h3>Hanging Up<a class="headerlink" href="#hanging-up" title="Permalink to this heading"></a></h3>
<p>You can also define a callback for when the player hangs up in the middle of a phone call. First, in <code class="docutils literal notranslate"><span class="pre">variables_editable.rpy</span></code> scroll down to the header <strong>PHONE HANG UP CALLBACK</strong> and find the variable <code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">phone_hangup_callback</span></code>. By default, it is set to the example function <code class="docutils literal notranslate"><span class="pre">hang_up_callback_fn</span></code>, but you can change this to whatever you like or even change it in the middle of a route.</p>
<p><code class="docutils literal notranslate"><span class="pre">phone_hangup_callback</span></code> should be given the name of a function which takes one parameter, the call that the player was in the middle of when they hung up the phone. The call is stored as a PhoneCall object, which has several useful fields you can access for more information on the call such as the caller and the label it’s attached to. The most relevant fields are:</p>
<dl class="simple">
<dt><cite>caller</cite></dt><dd><p>The ChatCharacter object of the person the player was on the phone with.</p>
</dd>
<dt><cite>phone_label</cite></dt><dd><p>A string with the name of the label where this phone call is found.</p>
</dd>
<dt><cite>call_status</cite></dt><dd><p>A string that is one of “incoming”, “outgoing”, “missed”, or “voicemail”. Details the status of the phone call.</p>
</dd>
<dt><cite>voicemail</cite></dt><dd><p>True if this phone call is a character’s voicemail message rather than a proper conversation. Typically if you check this variable, it’s to ignore it.</p>
</dd>
</dl>
<p>You can use as many of these fields to check for details on the phone call as you like, then use that information to narrow down what the program should do. Like the profile picture callback, the function should return the name of a label to jump to. For example, the character might try phoning the player back, or you might lower the character’s affection for the player. An example might look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">init</span> <span class="k">python</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">hang_up_callback</span><span class="p">(</span><span class="n">phonecall</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">phonecall</span><span class="o">.</span><span class="n">phone_label</span> <span class="o">==</span> <span class="s1">&#39;day_7_chatroom_10_incoming_s&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;day_7_chatroom_10_s_hangup&#39;</span>
        <span class="k">return</span>

<span class="k">label</span> <span class="n">day_7_chatroom_10_s_hangup</span><span class="p">():</span>
    <span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
        <span class="n">s</span> <span class="s2">&quot;[name], is your phone&#39;s connection okay?&quot;</span>
        <span class="n">s</span> <span class="s2">&quot;The call just dropped T_T&quot;</span>
        <span class="k">label</span> <span class="n">day_7_chatroom_10_s_hangup_menu1</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>This can be as elaborate as you want it to be, including setting conditions that allow the player to pass plot branches or acknowledging that the player hung up at a certain point. A more complex example might be:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">knows_about_bomb</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">label</span> <span class="n">day_7_chatroom_10_incoming_s</span><span class="p">():</span>
    <span class="n">s</span> <span class="s2">&quot;[name]... I know this might be hard to hear, but I should tell you now.&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;I understand if you don&#39;t want to be a part of the RFA after this.&quot;</span>
    <span class="k">$</span> <span class="n">knows_about_bomb</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">s</span> <span class="s2">&quot;There is a bomb in the apartment. It was supposed to protect sensitive information.&quot;</span>
    <span class="c1"># ...</span>
    <span class="k">return</span>

<span class="c1"># Presuming the same callback function is used as shown above</span>
<span class="k">label</span> <span class="n">day_7_chatroom_10_s_hangup</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">knows_about_bomb</span><span class="p">:</span>
        <span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">s</span> <span class="s2">&quot;Hey... I&#39;m sure that was a lot of information so I get why you hung up.&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;You can call me back whenever you&#39;re ready to talk.&quot;</span>
        <span class="k">$</span> <span class="n">create_outgoing_call</span><span class="p">(</span><span class="s1">&#39;day_7_chatroom_10_about_bomb&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">s</span> <span class="s2">&quot;[name], I didn&#39;t even get to tell you... you must be really upset.&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;I think this is only going to make you more upset, but...&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;...&quot;</span>
            <span class="n">s</span> <span class="s2">&quot;Call me when you get a moment, okay?&quot;</span>
        <span class="k">$</span> <span class="n">create_outgoing_call</span><span class="p">(</span><span class="s1">&#39;day_7_chatroom_10_re_explain_issue&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>In this way, you can create context-sensitive callbacks so that the characters remember what they talked about with the player and can react to their actions in meaningful ways.</p>
</section>
</section>
<section id="phone-only-characters">
<h2>Phone-Only Characters<a class="headerlink" href="#phone-only-characters" title="Permalink to this heading"></a></h2>
<p>Like with Story Mode, sometimes you may have a character who only needs to exist for a phone call but doesn’t need all the bells and whistles of a full ChatCharacter definition. There are two ways to define such characters:</p>
<section id="dialogue-only-phone-characters">
<h3>Dialogue-Only Phone Characters<a class="headerlink" href="#dialogue-only-phone-characters" title="Permalink to this heading"></a></h3>
<p>For characters that only need to speak in phone calls, but don’t need a profile picture or any other information, you can create a regular Character and inherit from the <code class="docutils literal notranslate"><span class="pre">phone_char</span></code> object. This applies in situations such as:</p>
<ul class="simple">
<li><p>The player can hear the voice of someone else in the background of a call (e.g. the player called Yoosung, but can hear a professor talking in the background on occasion)</p></li>
<li><p>The player called a regular character, but the person who picked up was not the regular character (e.g. the player phoned Jumin, but his father picked up instead)</p></li>
<li><p>You are defining a specific voicemail voice</p></li>
</ul>
<p>These characters don’t need their own profile picture, but should have their own Character object to speak dialogue with so that the player can properly use the voice tagging system to mute characters they don’t want to listen to.</p>
<p>To define a dialogue-only phone character, you can do:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">hana_phone</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="s2">&quot;Hana&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">phone_character</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then write dialogue in-game via:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">hana_phone</span> <span class="s2">&quot;This is some dialogue said by Hana.&quot;</span>
<span class="n">hana_phone</span> <span class="s2">&quot;It uses the other_voice tag.&quot;</span>
</pre></div>
</div>
</section>
<section id="incoming-call-phone-characters">
<h3>Incoming Call Phone Characters<a class="headerlink" href="#incoming-call-phone-characters" title="Permalink to this heading"></a></h3>
<p>For characters who can call the player, but don’t need a fully-fledged character definition, there’s the special <code class="docutils literal notranslate"><span class="pre">PhoneCharacter</span></code> class you can use to define a character for phone calls.</p>
<p>PhoneCharacters only need a name, a profile picture, and a file_id. Like with regular characters, the file_id is used to associate them with phone calls, so you can write incoming call labels that are automatically detected by the program. It also helps the program find the phone call to fill out the History.</p>
<p>A typical PhoneCharacter definition might look as follows:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">hana_phone</span>  <span class="o">=</span> <span class="n">PhoneCharacter</span><span class="p">(</span><span class="s2">&quot;Hana&quot;</span><span class="p">,</span> <span class="s2">&quot;Profile Pics/Other/hana-1.webp&quot;</span><span class="p">,</span> <span class="s1">&#39;ha&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can put this definition anywhere you like, though it’s usually a good idea to keep your character definitions in a central place where you can find them later.</p>
<p>Then, to write a phone call for this character, you can add a label like you would with the regular cast of characters:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_3_chat_7</span><span class="p">():</span>
    <span class="k">scene</span> <span class="n">evening</span>
    <span class="n">y</span> <span class="s2">&quot;Hi [name], sorry to bother you with this!&quot;</span>
    <span class="n">y</span> <span class="s2">&quot;I&#39;m about to write a test so I gave your number to a friend.&quot;</span>
    <span class="n">y</span> <span class="s2">&quot;She&#39;ll call you if anything changes.&quot;</span>
    <span class="n">y</span> <span class="s2">&quot;Wish me luck!&quot;</span>
    <span class="n">exit</span> <span class="n">chatroom</span> <span class="n">y</span>

<span class="k">label</span> <span class="n">day_3_chat_7_incoming_ha</span><span class="p">():</span>
    <span class="n">hana_phone</span> <span class="s2">&quot;Hi, this is... um, [name], I think? Yoosung gave me your number.&quot;</span>
    <span class="n">hana_phone</span> <span class="s2">&quot;Nothing&#39;s wrong, I just wanted to check if the number worked.&quot;</span>
    <span class="n">hana_phone</span> <span class="s2">&quot;Haha, this is actually pretty awkward, so I think I&#39;ll hang up now.&quot;</span>
    <span class="n">hana_phone</span> <span class="s2">&quot;Bye.&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">PhoneCharacter</span></code> acts the same as a <code class="docutils literal notranslate"><span class="pre">ChatCharacter</span></code> in nearly all respects, including the ability to update their profile picture, name, and more, but they won’t appear in the player’s contact list or on the home screen as a character profile. If you want that functionality, you should define them as a ChatCharacter instead (see <a class="reference internal" href="creating-characters.html#creating-characters"><span class="std std-ref">Creating Characters</span></a>).</p>
<p>Additionally, if the player misses a call from a <code class="docutils literal notranslate"><span class="pre">PhoneCharacter</span></code>, they will only be able to call the character back if that call is still available. In practice, this means that the player can’t call a <code class="docutils literal notranslate"><span class="pre">PhoneCharacter</span></code> whenever they like; only when an outstanding call is available. Outgoing calls to <code class="docutils literal notranslate"><span class="pre">PhoneCharacter</span></code> are technically supported if an outgoing call is available; however, if you wish to allow for outgoing calls, you should define this character using the <code class="docutils literal notranslate"><span class="pre">ChatCharacter</span></code> class instead of <code class="docutils literal notranslate"><span class="pre">PhoneCharacter</span></code>, as phone-only characters do not have a contact image which makes it difficult for players to call them.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="chatrooms.html" class="btn btn-neutral float-left" title="Chatrooms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="text-messages.html" class="btn btn-neutral float-right" title="Text Messages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shawna P.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>